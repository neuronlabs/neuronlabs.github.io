<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">

  
    <title>Structure - neuronlabs.github.io</title>

    
  

  <link rel="shortcut icon" href="http://localhost:4000/favicon.ico" type="image/x-icon">

  <link rel="stylesheet" href="http://localhost:4000/assets/css/just-the-docs.css">

  

  
  <script type="text/javascript" src="http://localhost:4000/assets/js/just-the-docs.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Structure | neuronlabs.github.io</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Structure" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Neuronlabs Pages repository" />
<meta property="og:description" content="Neuronlabs Pages repository" />
<link rel="canonical" href="http://localhost:4000/neuron-core/models/structure.html" />
<meta property="og:url" content="http://localhost:4000/neuron-core/models/structure.html" />
<meta property="og:site_name" content="neuronlabs.github.io" />
<script type="application/ld+json">
{"@type":"WebPage","headline":"Structure","url":"http://localhost:4000/neuron-core/models/structure.html","description":"Neuronlabs Pages repository","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>

  <div class="page-wrap">
    <div class="side-bar">
      <a href="http://localhost:4000" class="site-title fs-6 lh-tight">neuronlabs.github.io</a>
      <span class="fs-3"><button class="js-main-nav-trigger navigation-list-toggle btn btn-outline" type="button" data-text-toggle="Hide">Menu</button></span>
      <div class="navigation main-nav js-main-nav">
        <nav role="navigation" aria-label="Main navigation">
  <ul class="navigation-list">
    
    
      
        
      
    
      
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="http://localhost:4000/" class="navigation-list-link">Neuron</a>
            
          </li>
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
          <li class="navigation-list-item active">
            
            <a href="http://localhost:4000/neuron-core" class="navigation-list-link">Core ORM</a>
            
              
              <ul class="navigation-list-child-list ">
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="http://localhost:4000/neuron-core/controller.html" class="navigation-list-link">Controller</a>
                      
                    </li>
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="http://localhost:4000/neuron-core/repositories.html" class="navigation-list-link">Repositories</a>
                      
                    </li>
                  
                
                  
                
                  
                    <li class="navigation-list-item  active">
                      
                      <a href="http://localhost:4000/neuron-core/models" class="navigation-list-link">Models</a>
                      
                        
                        <ul class="navigation-list-child-list">
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                              <li class="navigation-list-item  active">
                                <a href="http://localhost:4000/neuron-core/models/structure.html" class="navigation-list-link active">Structure</a>
                              </li>
                            
                          
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a href="http://localhost:4000/neuron-core/models/field.html" class="navigation-list-link">Fields</a>
                              </li>
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a href="http://localhost:4000/neuron-core/models/relationship.html" class="navigation-list-link">Relationships</a>
                              </li>
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a href="http://localhost:4000/neuron-core/models/config.html" class="navigation-list-link">Config</a>
                              </li>
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                        </ul>
                      
                    </li>
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="http://localhost:4000/neuron-core/query/" class="navigation-list-link">Query</a>
                      
                        
                        <ul class="navigation-list-child-list">
                          
                            
                          
                            
                          
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a href="http://localhost:4000/neuron-core/query/scope.html" class="navigation-list-link">Scope</a>
                              </li>
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a href="http://localhost:4000/neuron-core/query/insert.html" class="navigation-list-link">Insert</a>
                              </li>
                            
                          
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a href="http://localhost:4000/neuron-core/query/get.html" class="navigation-list-link">Get</a>
                              </li>
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a href="http://localhost:4000/neuron-core/query/list.html" class="navigation-list-link">List</a>
                              </li>
                            
                          
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a href="http://localhost:4000/neuron-core/query/patch.html" class="navigation-list-link">Patch</a>
                              </li>
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a href="http://localhost:4000/neuron-core/query/delete.html" class="navigation-list-link">Delete</a>
                              </li>
                            
                          
                            
                          
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a href="http://localhost:4000/neuron-core/query/filters.html" class="navigation-list-link">Filters</a>
                              </li>
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a href="http://localhost:4000/neuron-core/query/fieldset.html" class="navigation-list-link">Fieldset</a>
                              </li>
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a href="http://localhost:4000/neuron-core/query/selected_fields.html" class="navigation-list-link">Selected Fields</a>
                              </li>
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a href="http://localhost:4000/neuron-core/query/sorts.html" class="navigation-list-link">Sorts</a>
                              </li>
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a href="http://localhost:4000/neuron-core/query/pagination.html" class="navigation-list-link">Pagination</a>
                              </li>
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a href="http://localhost:4000/neuron-core/query/transactions.html" class="navigation-list-link">Transactions</a>
                              </li>
                            
                          
                        </ul>
                      
                    </li>
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="http://localhost:4000/neuron-core/errors/" class="navigation-list-link">Errors</a>
                      
                        
                        <ul class="navigation-list-child-list">
                          
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a href="http://localhost:4000/neuron-core/errors/error_struct.html" class="navigation-list-link">Error Struct</a>
                              </li>
                            
                          
                            
                          
                            
                          
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a href="http://localhost:4000/neuron-core/errors/class.html" class="navigation-list-link">Class</a>
                              </li>
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                        </ul>
                      
                    </li>
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="http://localhost:4000/neuron-core/processor.html" class="navigation-list-link">Processor</a>
                      
                    </li>
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
              </ul>
            
          </li>
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="http://localhost:4000/neuron-gateway/" class="navigation-list-link">Gateway</a>
            
              
              <ul class="navigation-list-child-list ">
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
              </ul>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="http://localhost:4000/neuron-pq/" class="navigation-list-link">Postgres Repository</a>
            
          </li>
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="http://localhost:4000/neuron-mongo/" class="navigation-list-link">Mongo Repository</a>
            
          </li>
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
  </ul>
</nav>

      </div>
      <footer role="contentinfo" class="site-footer">
        <p class="text-small text-grey-dk-000 mb-0">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p>
      </footer>
    </div>
    <div class="main-content-wrap js-main-content" tabindex="0">
      <div class="page-header">
        <div class="main-content">
          
          
            <ul class="list-style-none text-small mt-md-1 mb-md-1 pb-4 pb-md-0 js-aux-nav aux-nav">
              
                <li class="d-inline-block my-0 mr-2"><a href="https://github.com/neuronlabs">Neuron Project</a></li>
              
                <li class="d-inline-block my-0 mr-2"><a href="https://github.com/neuronlabs/neuron-core">Core</a></li>
              
                <li class="d-inline-block my-0 mr-2"><a href="https://github.com/neuronlabs/neuron-gateway">Gateway</a></li>
              
                <li class="d-inline-block my-0 mr-2"><a href="https://github.com/neuronlabs/neuron-pq">PQ Repository</a></li>
              
                <li class="d-inline-block my-0"><a href="https://github.com/neuronlabs/neuron-mongo">Mongo Repository</a></li>
              
            </ul>
          
        </div>
      </div>
      <div class="main-content">
        
          
            <nav class="breadcrumb-nav">
              <ol class="breadcrumb-nav-list">
                
                  <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/neuron-core">Core ORM</a></li>
                  <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/neuron-core/models">Models</a></li>
                
                <li class="breadcrumb-nav-list-item"><span>Structure</span></li>
              </ol>
            </nav>
          
        
        <div id="main-content" class="page-content" role="main">
          <h1 id="model-structure">Model Structure</h1>

<p>The <code class="highlighter-rouge">*ModelStruct</code> is a data structure that stores all prepared information about the ‘model’.</p>

<p>This document would base it’s examples on the provided models:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// Bird is the neuron model used for the documentation.</span><span class="x">
</span><span class="c">// It's fields have cardcoded neuron types.</span><span class="x">
</span><span class="k">type</span><span class="x"> </span><span class="n">Bird</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">ID</span><span class="x">   </span><span class="kt">int</span><span class="x">    </span><span class="s">`neuron:"type=primary"`</span><span class="x">
    </span><span class="n">Name</span><span class="x"> </span><span class="kt">string</span><span class="x"> </span><span class="s">`neuron:"type=attr"`</span><span class="x">
    </span><span class="n">Age</span><span class="x">  </span><span class="kt">int</span><span class="x">    </span><span class="s">`neuron:"type=attr"`</span><span class="x">

    </span><span class="n">Specie</span><span class="x">       </span><span class="o">*</span><span class="n">BirdSpecie</span><span class="x"> </span><span class="s">`neuron:"type=relation"`</span><span class="x">
    </span><span class="n">BirdSpecieID</span><span class="x"> </span><span class="kt">int</span><span class="x">       </span><span class="s">`neuron:"type=foreign"`</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="c">// BirdSpecie is the neuron model used for the documentation.</span><span class="x">
</span><span class="c">// It defines the birds species.</span><span class="x">
</span><span class="k">type</span><span class="x"> </span><span class="n">BirdSpecie</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">ID</span><span class="x">      </span><span class="kt">int</span><span class="x">
    </span><span class="n">Name</span><span class="x">    </span><span class="kt">string</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div></div>
<p>A model stores following variables:</p>

<ul>
  <li>Type - specified <code class="highlighter-rouge">reflect.Type</code> that is dereferenced model type reflection.</li>
  <li>Collection - pluralized name converted using <code class="highlighter-rouge">Controller's</code> NamerFunc.</li>
  <li>Config - is the <code class="highlighter-rouge">*config.Model</code> matched for given model.</li>
  <li>Store - is the <em>key</em>:<em>value</em> storage for given model.</li>
  <li>Primary Key Field - is the <a href="#structfield">*mapping.StructField</a> of the model’s primary index field.</li>
  <li>Attribute Fields - <em>(optional)</em> model may contain multiple <a href="#structfield">*mapping.StructField</a> attributes. An attribute is the non related information about the model stored directly in the model’s repository.</li>
  <li>Relationship Fields - <em>(optional)</em> relationship fields represents references to the other models stored as struct fields.</li>
  <li>ForeignKey Fields - <em>(optional)</em> foreign keys are the fields directly connected with the relationship. It defines matched <strong>primary key</strong> of the related field’s model.</li>
  <li>Language Field - <em>(optional)</em> is a singleton (per model), optional field that defines <code class="highlighter-rouge">lanaguage</code> and <code class="highlighter-rouge">i18n</code> related values.</li>
  <li>Filter Key Fields - <em>(optional)</em> filter key fields are the fields which values are not stored within the model’s repository. Their value should be used to specify some state that might be usable in the Hooks.</li>
</ul>

<h2 id="registering-models">Registering Models</h2>

<p>Neuron requires to register the model before any operation starts.
Registering model, stores it’s <code class="highlighter-rouge">*mapping.ModelStruct</code>  in the <code class="highlighter-rouge">Controller</code>.
A controller can have only a single model related to each <code class="highlighter-rouge">reflect.Type</code> and a single <code class="highlighter-rouge">collection</code>.</p>

<p>Register the models with the <code class="highlighter-rouge">RegisterModels</code> <code class="highlighter-rouge">Controller's</code> method.
It takes the model value instances as arguments.
If a model have relationship fields, all the related models must be registered at once. The order of the provided models doesn’t matter.</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">c</span><span class="o">.</span><span class="n">RegisterModels</span><span class="p">(</span><span class="n">Bird</span><span class="p">{},</span><span class="x"> </span><span class="n">BirdSpecie</span><span class="p">{})</span><span class="x">
</span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="c">// the model definition is invalid.</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="n">err</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div></div>

<h3 id="getting-model-struct">Getting Model Struct</h3>

<p>Having our models registered, we might want to use it’s mapping structure.
This would be done by the <code class="highlighter-rouge">Controller's</code> <code class="highlighter-rouge">ModelStruct</code> method:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">modelStruct</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">c</span><span class="o">.</span><span class="n">ModelStruct</span><span class="p">(</span><span class="n">Bird</span><span class="p">{})</span><span class="x">
</span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="c">// the model is not found within given controller.</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="n">err</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div></div>



          
        </div>
      </div>
    </div>
  </div>

</body>
</html>
